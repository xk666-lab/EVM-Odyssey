# Gas优化篇

> ⚡ **分基础和进阶两部分学习**
> 
> ⏱️ 预计学习时间：**10-12小时**

---

## 🎯 为什么要分两次学？

### 基础优化（Week 7）⭐

```
目的：建立优化意识
内容：基础优化技巧
时间：2-3小时

学习：
✅ 12.1-优化原则
✅ 12.2-存储优化（变量打包）
✅ 12.3-计算优化（unchecked）

为什么早学？
→ 学OpenZeppelin时能理解优化设计
→ 从一开始就写高效代码
```

### 进阶优化（Week 12）⭐⭐

```
目的：深入优化技巧
内容：高级优化方法
时间：7-9小时

学习：
✅ 12.4-函数优化
✅ 12.5-数据结构优化
✅ 12.6-高级技巧（汇编）
✅ 12.7-性能优化系统方法

为什么后学？
→ 需要实践经验
→ 需要理解EVM
```

---

## 📚 章节内容

### 12.1-优化原则 (0.5h) ⭐ Week 7学
- Gas消耗来源
- 优化思路
- 优化权衡

### 12.2-存储优化 (1h) ⭐ Week 7学
- **变量打包** ⭐
- 使用常量
- 使用immutable
- 减少存储写入
- 使用memory缓存

### 12.3-计算优化 (0.5h) ⭐ Week 7学
- **使用unchecked** ⭐
- 位运算技巧
- 短路运算
- 循环优化基础

---

### 12.4-函数优化 (1.5h) Week 12学
- 函数可见性
- external vs public
- view与pure
- payable技巧

### 12.5-数据结构优化 (1.5h) Week 12学
- 数组vs映射
- bytes vs string
- EnumerableSet

### 12.6-高级技巧 (3h) Week 12学
- 自定义错误
- 事件替代存储
- 批量操作
- **汇编优化**

### 12.7-性能优化系统方法 (2h) Week 12学
- EVM Gas计量机制
- 编译器优化
- 部署成本优化

---

## 🎯 学习路径

### Week 7: 基础优化（2-3小时）

```
学习目标：
✅ 知道什么消耗Gas
✅ 知道变量打包
✅ 知道unchecked作用
✅ 建立优化意识

为什么？
→ 下周学OpenZeppelin能理解优化设计
```

### Week 12: 进阶优化（7-9小时）

```
学习目标：
✅ 深入优化技巧
✅ 汇编级优化
✅ 性能测试

为什么？
→ 已经有实践经验
→ 能理解高级技巧
```

---

## 🔗 前置知识

确保已学习：
- ✅ `03-Solidity/3.6-代码规范/08-Gas优化编码规范` ⭐

---

## 🚀 后续应用

### Week 8: 应用到OpenZeppelin学习

```
读Solmate ERC20源码：
✅ 能理解为什么这样打包变量
✅ 能理解为什么用unchecked
✅ 能理解Gas优化技巧

收获：
不只是学库，更学到优化思路
```

### Week 12: 深入学习

```
学完EVM深入后：
✅ 理解操作码Gas消耗
✅ 理解存储原理
✅ 能用汇编优化
```

---

## ✅ 学习检查清单

### 基础优化（Week 7）✅
- [ ] 理解Gas消耗来源
- [ ] 掌握变量打包
- [ ] 知道何时用unchecked
- [ ] 知道基础优化原则

### 进阶优化（Week 12）✅
- [ ] 掌握函数优化
- [ ] 掌握数据结构选择
- [ ] 会用汇编优化
- [ ] 能系统优化合约

---

**Optimize for efficiency! ⚡💎**
