# Uniswapå®Œæ•´æ¼”è¿›å² (V1 â†’ V2 â†’ V3 â†’ V4)

> ğŸ’¡ **ä¸€æ–‡çœ‹æ‡‚Uniswapçš„æŠ€æœ¯æ¼”è¿›**
> 
> ä»2018å¹´æœ€ç®€å•çš„AMMï¼Œåˆ°2024å¹´æœ€å…ˆè¿›çš„æ¨¡å—åŒ–DEX
> 
> â±ï¸ é¢„è®¡å­¦ä¹ æ—¶é—´ï¼š2å°æ—¶

---

## ğŸ“š ç›®å½•

1. [V1ï¼šAMMçš„è¯ç”Ÿï¼ˆ2018ï¼‰](#1-v1ammçš„è¯ç”Ÿ2018)
2. [V2ï¼šå·¥ä¸šæ ‡å‡†ï¼ˆ2020ï¼‰](#2-v2å·¥ä¸šæ ‡å‡†2020)
3. [V3ï¼šé›†ä¸­æµåŠ¨æ€§é©å‘½ï¼ˆ2021ï¼‰](#3-v3é›†ä¸­æµåŠ¨æ€§é©å‘½2021)
4. [V4ï¼šæ¨¡å—åŒ–æœªæ¥ï¼ˆ2024ï¼‰](#4-v4æ¨¡å—åŒ–æœªæ¥2024)
5. [ç‰ˆæœ¬å¯¹æ¯”æ€»ç»“](#5-ç‰ˆæœ¬å¯¹æ¯”æ€»ç»“)
6. [æŠ€æœ¯æ¼”è¿›æ—¶é—´çº¿](#6-æŠ€æœ¯æ¼”è¿›æ—¶é—´çº¿)

---

## 1. V1ï¼šAMMçš„è¯ç”Ÿï¼ˆ2018ï¼‰

### 1.1 è¯ç”ŸèƒŒæ™¯

**åˆ›é€ è€…ï¼šHayden Adams**

```
æ—¶é—´ï¼š2018å¹´11æœˆ
èƒŒæ™¯ï¼š
- å½“æ—¶DEXéƒ½æ˜¯è®¢å•ç°¿æ¨¡å¼
- 0xã€EtherDeltaã€IDEXç­‰
- æµåŠ¨æ€§å·®ã€ç”¨æˆ·ä½“éªŒå·®
- Gasè´¹é«˜æ˜‚

Haydençš„çµæ„Ÿæ¥æºï¼š
â†’ Vitalik Buterinçš„åšå®¢æ–‡ç« ï¼ˆ2017ï¼‰
â†’ æå‡ºäº†xÂ·y=kçš„AMMæ¦‚å¿µ
â†’ Haydenå†³å®šå®ç°å®ƒ
```

**å¼€å‘è¿‡ç¨‹ï¼š**
```
2017å¹´åº•ï¼šHaydenå¤±ä¸šï¼Œå¼€å§‹å­¦ä¹ Solidity
2018å¹´åˆï¼šå¼€å§‹å¼€å‘Uniswap
2018å¹´7æœˆï¼šè·å¾—ä»¥å¤ªåŠåŸºé‡‘ä¼š$10ä¸‡èµ„åŠ©
2018å¹´11æœˆï¼šUniswap V1æ­£å¼ä¸Šçº¿ï¼

åˆå§‹TVLï¼š$30,000
ç°åœ¨å›çœ‹ï¼šè¿™æ˜¯DeFiå†å²çš„è½¬æŠ˜ç‚¹ï¼
```

### 1.2 V1çš„æ ¸å¿ƒåˆ›æ–° â­

#### åˆ›æ–°1ï¼šxÂ·y=kå…¬å¼

```
è¿™æ˜¯DeFiå²ä¸Šæœ€é‡è¦çš„åˆ›æ–°ï¼

ETH Ã— Token = k

ç¬¬ä¸€æ¬¡å°†AMMæ¦‚å¿µè½åœ°
â†’ ä¸éœ€è¦è®¢å•ç°¿
â†’ ä¸éœ€è¦å¯¹æ‰‹æ–¹
â†’ ä»»ä½•äººéƒ½èƒ½æä¾›æµåŠ¨æ€§
```

#### åˆ›æ–°2ï¼šæç®€è®¾è®¡

```solidity
// V1æ ¸å¿ƒåˆçº¦ï¼ˆç®€åŒ–ï¼‰
contract UniswapV1Exchange {
    address public tokenAddress;
    
    // âœ¨ æ ¸å¿ƒå‡½æ•°1ï¼šETHæ¢Token
    function ethToTokenSwap(uint256 minTokens) public payable {
        uint256 tokenReserve = token.balanceOf(address(this));
        uint256 tokensBought = getInputPrice(
            msg.value,
            address(this).balance - msg.value,
            tokenReserve
        );
        
        require(tokensBought >= minTokens);
        token.transfer(msg.sender, tokensBought);
    }
    
    // âœ¨ æ ¸å¿ƒå‡½æ•°2ï¼šè®¡ç®—ä»·æ ¼ (xÂ·y=k)
    function getInputPrice(
        uint256 inputAmount,
        uint256 inputReserve,
        uint256 outputReserve
    ) public pure returns (uint256) {
        uint256 inputAmountWithFee = inputAmount * 997;
        uint256 numerator = inputAmountWithFee * outputReserve;
        uint256 denominator = (inputReserve * 1000) + inputAmountWithFee;
        return numerator / denominator;
    }
}
```

**ä»£ç ç‰¹ç‚¹ï¼š**
- åªæœ‰200è¡Œå·¦å³
- éå¸¸ç®€å•æ˜“æ‡‚
- å®Œç¾å®ç°xÂ·y=k

#### åˆ›æ–°3ï¼šFactoryæ¨¡å¼

```
Uniswap V1 Factory:
- ä»»ä½•äººéƒ½å¯ä»¥åˆ›å»ºäº¤æ˜“å¯¹
- æ¯ä¸ªERC20éƒ½æœ‰ä¸€ä¸ªETHäº¤æ˜“å¯¹
- è‡ªåŠ¨åŒ–éƒ¨ç½²

è¿™å¼€åˆ›äº†DeFiçš„"æ— éœ€è®¸å¯"èŒƒå¼ï¼
```

### 1.3 V1çš„å±€é™ä¸å¼Šç«¯ âš ï¸

#### å¼Šç«¯1ï¼šæ‰€æœ‰äº¤æ˜“éƒ½ç»è¿‡ETH

```
æƒ³ç”¨USDCä¹°DAIï¼Ÿ

V1è·¯å¾„ï¼š
USDC â†’ ETH â†’ DAI
       â†‘
    å¿…ç»ä¸­è½¬ç«™

é—®é¢˜ï¼š
âŒ å¤šä¸€æ¬¡å…‘æ¢ â†’ åŒå€æ‰‹ç»­è´¹
âŒ å¤šä¸€æ¬¡æ»‘ç‚¹ â†’ ä»·æ ¼æ›´å·®  
âŒ Gasè´¹æ›´é«˜ â†’ æˆæœ¬å¢åŠ 
```

#### å¼Šç«¯2ï¼šèµ„é‡‘æ•ˆç‡æä½

```
æµåŠ¨æ€§åˆ†æ•£åœ¨$0-$âˆæ‰€æœ‰ä»·æ ¼

å®é™…äº¤æ˜“ï¼š
åªåœ¨å½“å‰ä»·æ ¼Â±10%èŒƒå›´

ç»“æœï¼š
90%çš„èµ„é‡‘åœ¨é—²ç½®ï¼
èµ„æœ¬åˆ©ç”¨ç‡<10%
```

**å®ä¾‹ï¼š**
```
æ± å­TVL: $1M
å®é™…æœ‰æ•ˆæµåŠ¨æ€§: ~$100K

å¦‚æœé›†ä¸­åœ¨Â±10%åŒºé—´:
æœ‰æ•ˆæµåŠ¨æ€§å¯è¾¾: $1M
æ•ˆç‡æå‡10å€ï¼
```

#### å¼Šç«¯3ï¼šæ‰‹ç»­è´¹å›ºå®š

```
V1æ‰‹ç»­è´¹: å›ºå®š0.3%

é—®é¢˜ï¼š
- ç¨³å®šå¸å¯¹ï¼š0.3%å¤ªé«˜
- æ³¢åŠ¨å¸å¯¹ï¼š0.3%å¯èƒ½å¤ªä½
- æ— æ³•çµæ´»è°ƒæ•´
```

#### å¼Šç«¯4ï¼šåŠŸèƒ½å•ä¸€

```
V1åªèƒ½ï¼š
âœ… ETH â†” Token swap
âœ… æä¾›æµåŠ¨æ€§
âœ… ç§»é™¤æµåŠ¨æ€§

ä¸èƒ½ï¼š
âŒ Token â†” Token ç›´æ¥äº¤æ˜“
âŒ è°ƒæ•´æ‰‹ç»­è´¹
âŒ ä»·æ ¼é¢„è¨€æœº
âŒ é—ªç”µè´·
```

### 1.4 V1çš„å†å²æ„ä¹‰

```
è™½ç„¶æœ‰å¾ˆå¤šå±€é™ï¼Œä½†V1æ„ä¹‰é‡å¤§ï¼š

1. é¦–æ¬¡å®ç°AMM â­â­â­â­â­
   â†’ è¯æ˜äº†xÂ·y=kå¯è¡Œ

2. å¼€åˆ›æ— éœ€è®¸å¯èŒƒå¼
   â†’ ä»»ä½•äººéƒ½èƒ½åˆ›å»ºäº¤æ˜“å¯¹

3. å¯å‘åç»­åˆ›æ–°
   â†’ SushiSwapã€PancakeSwapç­‰éƒ½forkäº†Uniswap

4. TVLæˆé•¿
   2019å¹´åˆ: $10M
   2020å¹´åˆ: $100M
   
æˆåŠŸéªŒè¯äº†AMMæ¨¡å¼ï¼
```

---

## 2. V2ï¼šå·¥ä¸šæ ‡å‡†ï¼ˆ2020ï¼‰

### 2.1 V2çš„è¯ç”Ÿ

```
å‘å¸ƒæ—¶é—´ï¼š2020å¹´5æœˆ
èƒŒæ™¯ï¼š
- V1å·²è¿è¡Œ1.5å¹´
- è¯æ˜äº†AMMå¯è¡Œ
- ä½†å±€é™æ˜æ˜¾
- DeFi Summerå³å°†åˆ°æ¥

ç›®æ ‡ï¼š
â†’ è§£å†³V1çš„æ‰€æœ‰ç—›ç‚¹
â†’ æˆä¸ºDEXçš„å·¥ä¸šæ ‡å‡†
```

### 2.2 V2çš„æ ¸å¿ƒæ”¹è¿› â­

#### æ”¹è¿›1ï¼šERC20 â†” ERC20ç›´æ¥äº¤æ˜“

```
V1: USDC â†’ ETH â†’ DAI (åŒè·³)
      â†“       â†“
    0.3%æ‰‹ç»­è´¹ 0.3%æ‰‹ç»­è´¹
    æ€»æˆæœ¬: 0.6%

V2: USDC â†’ DAI (ç›´æ¥)
      â†“
    0.3%æ‰‹ç»­è´¹
    æ€»æˆæœ¬: 0.3%

æ•ˆç‡æå‡100%ï¼
```

**å®ç°æ–¹å¼ï¼š**
```
V1: æ‰€æœ‰æ± å­éƒ½æ˜¯ ETH/Token
V2: ä»»æ„ä¸¤ä¸ªERC20éƒ½èƒ½é…å¯¹

ä¾‹å¦‚ï¼š
- USDC/DAI âœ…
- WBTC/ETH âœ…
- LINK/UNI âœ…
```

#### æ”¹è¿›2ï¼šä»·æ ¼é¢„è¨€æœºï¼ˆTWAPï¼‰

```
V2æ–°å¢ï¼šç´¯ç§¯ä»·æ ¼å˜é‡

price0CumulativeLast
price1CumulativeLast

ä½œç”¨ï¼š
â†’ å¤–éƒ¨åè®®å¯ä»¥è®¡ç®—TWAP
â†’ é˜²æ­¢ä»·æ ¼æ“çºµ
â†’ ä¸ºDeFiç”Ÿæ€æä¾›å®‰å…¨çš„ä»·æ ¼æº

æ„ä¹‰ï¼š
è¿™ä½¿å¾—Uniswapä¸ä»…æ˜¯DEX
è¿˜æˆä¸ºäº†é¢„è¨€æœºåŸºç¡€è®¾æ–½ï¼
```

**ä»£ç å®ç°ï¼š**
```solidity
// V2æ¯æ¬¡swapéƒ½ä¼šæ›´æ–°ç´¯ç§¯ä»·æ ¼
function _update(uint balance0, uint balance1) private {
    uint32 timeElapsed = blockTimestamp - blockTimestampLast;
    
    if (timeElapsed > 0 && reserve0 != 0 && reserve1 != 0) {
        // ç´¯ç§¯ä»·æ ¼ * æ—¶é—´
        price0CumulativeLast += uint(UQ112x112.encode(reserve1)
            .uqdiv(reserve0)) * timeElapsed;
        price1CumulativeLast += uint(UQ112x112.encode(reserve0)
            .uqdiv(reserve1)) * timeElapsed;
    }
}
```

#### æ”¹è¿›3ï¼šé—ªç”µå…‘æ¢ï¼ˆFlash Swapsï¼‰

```
V2åˆ›æ–°ï¼šå…ˆå–ä»£å¸ï¼Œåä»˜æ¬¾ï¼

ä¼ ç»Ÿswap:
1. ç”¨æˆ·ä»˜USDC
2. åˆçº¦ç»™ETH

Flash Swap:
1. åˆçº¦å…ˆç»™ä½ ETH âœ¨
2. ä½ å¯ä»¥ç”¨ETHåšä»»ä½•äº‹
3. æœ€åå†è¿˜USDCï¼ˆæˆ–è¿˜ETHï¼‰

åº”ç”¨åœºæ™¯ï¼š
- å¥—åˆ©
- æ¸…ç®—
- æŠµæŠ¼å“äº’æ¢
```

**ä»£ç ç¤ºä¾‹ï¼š**
```solidity
function flashSwap() external {
    // 1. å…ˆæ‹¿èµ°ETH
    pair.swap(
        10 ether,  // è¦çš„ETH
        0,         // ä¸è¦token1
        address(this),  // å‘ç»™è‡ªå·±
        bytes("flash") // è§¦å‘å›è°ƒ
    );
}

// 2. å›è°ƒå‡½æ•°
function uniswapV2Call(
    address sender,
    uint amount0,
    uint amount1,
    bytes calldata data
) external {
    // è¿™é‡Œä½ å·²ç»æœ‰10 ETHäº†ï¼
    // åšä»»ä½•ä½ æƒ³åšçš„äº‹...
    
    // 3. æœ€åè¿˜æ¬¾
    USDC.transfer(msg.sender, amountToRepay);
}
```

#### æ”¹è¿›4ï¼šåè®®è´¹å¼€å…³

```
V2è®¾è®¡äº†åè®®è´¹æœºåˆ¶ï¼š

å½“å‰ï¼š0.3%å…¨ç»™LP
æœªæ¥å¯å¼€å¯ï¼š
- 0.25%ç»™LP
- 0.05%ç»™åè®®

è™½ç„¶ä¸€ç›´æœªå¼€å¯ï¼Œä½†é¢„ç•™äº†å‡çº§ç©ºé—´
```

#### æ”¹è¿›5ï¼šæ›´å¥½çš„ä»£ç æ¶æ„

```
V2åˆ†ç¦»ä¸ºä¸¤å±‚ï¼š

Coreå±‚ (æ ¸å¿ƒ):
â”œâ”€â”€ UniswapV2Pair.sol (é…å¯¹åˆçº¦)
â”œâ”€â”€ UniswapV2Factory.sol (å·¥å‚åˆçº¦)  
â””â”€â”€ UniswapV2ERC20.sol (LPä»£å¸)

Peripheryå±‚ (å¤–å›´):
â”œâ”€â”€ UniswapV2Router02.sol (è·¯ç”±åˆçº¦)
â””â”€â”€ UniswapV2Library.sol (å·¥å…·åº“)

å¥½å¤„ï¼š
- æ ¸å¿ƒåˆçº¦ç®€å•å®‰å…¨
- å¤–å›´åˆçº¦æä¾›ä¾¿åˆ©åŠŸèƒ½
- åˆ†å±‚æ¶æ„ï¼Œæ˜“äºå®¡è®¡
```

### 2.3 V2çš„å¼Šç«¯ âš ï¸

è™½ç„¶V2å·²ç»å¾ˆä¼˜ç§€ï¼Œä½†ä»æœ‰å±€é™ï¼š

#### å¼Šç«¯1ï¼šèµ„é‡‘æ•ˆç‡ä»ç„¶å¾ˆä½

```
é—®é¢˜æœªè§£å†³ï¼

æµåŠ¨æ€§ä»åˆ†æ•£åœ¨æ‰€æœ‰ä»·æ ¼
èµ„æœ¬åˆ©ç”¨ç‡<10%

ä¾‹å¦‚ï¼š
$1MæµåŠ¨æ€§
å®é™…æœ‰æ•ˆ: ~$100K

å¯¹æ¯”CEXè®¢å•ç°¿ï¼š
$1MæµåŠ¨æ€§
å®é™…æœ‰æ•ˆ: ~$1M

å·®è·10å€ï¼
```

#### å¼Šç«¯2ï¼šæ— æ³•ä¸ªæ€§åŒ–LPç­–ç•¥

```
æ‰€æœ‰LPæä¾›çš„æµåŠ¨æ€§éƒ½ä¸€æ ·ï¼š
- ä»·æ ¼èŒƒå›´: $0 - $âˆ
- æ‰‹ç»­è´¹: 0.3%
- æ— æ³•å®šåˆ¶

LPæƒ³è¦ï¼š
âŒ é€‰æ‹©ä»·æ ¼åŒºé—´ï¼ˆé›†ä¸­èµ„é‡‘ï¼‰
âŒ é€‰æ‹©ä¸åŒè´¹ç‡
âŒ å®šåˆ¶åŒ–ç­–ç•¥
```

#### å¼Šç«¯3ï¼šå¤§é¢äº¤æ˜“æ»‘ç‚¹ä»é«˜

```
æ± å­: $10M TVL

ä¹°$1Mçš„ETH:
â†’ æ»‘ç‚¹ ~10%
â†’ ä»ç„¶ä¸é€‚åˆå¤§é¢

CEX:
â†’ æ»‘ç‚¹ <0.5%
```

#### å¼Šç«¯4ï¼šLPè¢«åŠ¨æ‰¿å—æ— å¸¸æŸå¤±

```
ä»·æ ¼åœ¨$1800-$2200æ³¢åŠ¨:

V2 LP:
- åœ¨$0-$âˆæä¾›æµåŠ¨æ€§
- å¤§éƒ¨åˆ†èµ„é‡‘åœ¨$1800-$2200ä¹‹å¤–é—²ç½®
- ä½†ä»æ‰¿å—å…¨éƒ¨æ— å¸¸æŸå¤±

ä¸åˆç†ï¼
```

### 2.4 V2çš„ç»Ÿæ²»åœ°ä½

```
å°½ç®¡æœ‰å±€é™ï¼ŒV2ä»ç„¶ï¼š

TVLå³°å€¼ï¼ˆ2021ï¼‰: $10B+
æ—¥äº¤æ˜“é‡: $1-2B
å¸‚å ç‡: DEXé¢†åŸŸ50%+

æˆä¸ºï¼š
âœ… DEXçš„å·¥ä¸šæ ‡å‡†
âœ… è¢«100+åè®®fork
âœ… DeFiåŸºç¡€è®¾æ–½

è¯æ˜ï¼š
ç®€å•å°±æ˜¯ç¾ï¼
```

---

## 3. V3ï¼šé›†ä¸­æµåŠ¨æ€§é©å‘½ï¼ˆ2021ï¼‰

### 3.1 V3çš„è¯ç”Ÿ

```
å‘å¸ƒæ—¶é—´ï¼š2021å¹´5æœˆ
èƒŒæ™¯ï¼š
- V2è¿è¡Œè‰¯å¥½ä½†èµ„é‡‘æ•ˆç‡ä½
- Curveè¯æ˜äº†é›†ä¸­æµåŠ¨æ€§çš„ä»·å€¼
- LPéœ€è¦æ›´çµæ´»çš„å·¥å…·

æ ¸å¿ƒç†å¿µï¼š
"è®©LPè‡ªå·±é€‰æ‹©ä»·æ ¼åŒºé—´"

è¿™æ˜¯DEXå†å²ä¸Šæœ€å¤§çš„åˆ›æ–°ï¼
```

### 3.2 V3çš„é©å‘½æ€§åˆ›æ–° â­â­â­â­â­

#### åˆ›æ–°1ï¼šé›†ä¸­æµåŠ¨æ€§ï¼ˆConcentrated Liquidityï¼‰

**æ ¸å¿ƒæ¦‚å¿µï¼š**

```
V2:
LPåœ¨$0-$âˆæä¾›æµåŠ¨æ€§
èµ„é‡‘åˆ†æ•£ï¼Œæ•ˆç‡ä½

V3:
LPé€‰æ‹©ä»·æ ¼åŒºé—´æä¾›æµåŠ¨æ€§
èµ„é‡‘é›†ä¸­ï¼Œæ•ˆç‡é«˜

ä¾‹å¦‚ï¼š
ETHå½“å‰ä»·æ ¼: $2000

V2 LP:
â”œâ”€â”€ $0-$âˆèŒƒå›´æä¾›$10K
â””â”€â”€ æœ‰æ•ˆæµåŠ¨æ€§: ~$1K

V3 LP:
â”œâ”€â”€ $1800-$2200èŒƒå›´æä¾›$10K
â””â”€â”€ æœ‰æ•ˆæµåŠ¨æ€§: ~$100K

èµ„é‡‘æ•ˆç‡æå‡100å€ï¼
```

**å¯è§†åŒ–å¯¹æ¯”ï¼š**

```
        æµåŠ¨æ€§åˆ†å¸ƒ

V2:     æ‰€æœ‰ä»·æ ¼å‡åŒ€åˆ†å¸ƒ
Price
$âˆ   â”‚ â–ˆâ–ˆâ–ˆ
     â”‚ â–ˆâ–ˆâ–ˆ
$3000â”‚ â–ˆâ–ˆâ–ˆ
$2000â”‚ â–ˆâ–ˆâ–ˆ â† å½“å‰ä»·æ ¼
$1000â”‚ â–ˆâ–ˆâ–ˆ
$0   â”‚ â–ˆâ–ˆâ–ˆ

V3:     é›†ä¸­åœ¨ä»·æ ¼åŒºé—´
Price
$âˆ   â”‚
     â”‚
$2200â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â† ä¸Šç•Œ
$2000â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â† å½“å‰ä»·æ ¼
$1800â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â† ä¸‹ç•Œ
$1000â”‚
$0   â”‚
```

#### åˆ›æ–°2ï¼šå¤šæ¡£è´¹ç‡

```
V2: å›ºå®š0.3%

V3: LPé€‰æ‹©è´¹ç‡
â”œâ”€â”€ 0.01% - è¶…ç¨³å®šå¸å¯¹ (USDC/USDT)
â”œâ”€â”€ 0.05% - ç¨³å®šå¸å¯¹ (DAI/USDC)
â”œâ”€â”€ 0.30% - ä¸»æµå¸å¯¹ (ETH/USDC) â† æœ€å¸¸ç”¨
â””â”€â”€ 1.00% - æ³¢åŠ¨å¸å¯¹ (SHIB/ETH)

æ„ä¹‰ï¼š
- ç¨³å®šå¸ä½è´¹ç‡ â†’ å¸å¼•æ›´å¤šäº¤æ˜“
- æ³¢åŠ¨å¸é«˜è´¹ç‡ â†’ è¡¥å¿ILé£é™©
```

#### åˆ›æ–°3ï¼šRange Ordersï¼ˆèŒƒå›´è®¢å•ï¼‰

```
LPå¯ä»¥è®¾ç½®æçª„ä»·æ ¼åŒºé—´ï¼š

ä¾‹å¦‚ï¼š
å½“å‰ETH = $2000

è®¾ç½®åŒºé—´:
$1999.5 - $2000.5

æ•ˆæœï¼š
â†’ ç±»ä¼¼é™ä»·å•
â†’ ä»·æ ¼åˆ°è¾¾åŒºé—´ï¼Œè‡ªåŠ¨æˆäº¤
â†’ ä»·æ ¼ç¦»å¼€åŒºé—´ï¼Œå˜æˆå•å¸

è¿™æ¨¡ç³Šäº†AMMå’Œè®¢å•ç°¿çš„ç•Œé™ï¼
```

#### åˆ›æ–°4ï¼šNFT LP Position

```
V2: LPä»£å¸æ˜¯ERC20
æ‰€æœ‰LPä¸€æ ·ï¼Œå¯äº’æ¢

V3: LPä»£å¸æ˜¯ERC721 (NFT)
æ¯ä¸ªLP Positionéƒ½æ˜¯ç‹¬ç‰¹çš„

åŸå› ï¼š
- ä¸åŒä»·æ ¼åŒºé—´
- ä¸åŒè´¹ç‡
- ä¸åŒçš„liquidity

æ¯ä¸ªPositionéƒ½ä¸åŒ â†’ å¿…é¡»ç”¨NFT
```

#### åˆ›æ–°5ï¼šé¢„è¨€æœºæ”¹è¿›

```
V2: éœ€è¦å¤–éƒ¨åˆçº¦è®¡ç®—TWAP
V3: å†…ç½®å‡ ä½•å¹³å‡TWAP

ä¼˜åŠ¿ï¼š
- æ›´ç²¾ç¡®
- Gasæ•ˆç‡æ›´é«˜
- æ›´éš¾æ“çºµ
```

### 3.3 V3çš„å¼Šç«¯ âš ï¸

#### å¼Šç«¯1ï¼šå¤æ‚æ€§å¤§å¹…å¢åŠ 

```
V2ä»£ç ï¼š~500è¡Œ
V3ä»£ç ï¼š~2000è¡Œ

å¤æ‚åº¦æå‡4å€ï¼

å½±å“ï¼š
âŒ å­¦ä¹ æ›²çº¿é™¡å³­
âŒ å®¡è®¡æˆæœ¬é«˜
âŒ æ½œåœ¨bugæ›´å¤š
âŒ é›†æˆå›°éš¾
```

#### å¼Šç«¯2ï¼šLPéœ€è¦ä¸»åŠ¨ç®¡ç†

```
V2: 
æä¾›æµåŠ¨æ€§ â†’ èººå¹³èµšé’± âœ…

V3:
æä¾›æµåŠ¨æ€§ â†’ éœ€è¦ä¸»åŠ¨ç®¡ç† âš ï¸
- ä»·æ ¼ç¦»å¼€åŒºé—´ â†’ åœæ­¢èµšæ‰‹ç»­è´¹
- éœ€è¦è°ƒæ•´åŒºé—´
- ç±»ä¼¼æœŸæƒåšå¸‚

å¯¹LPè¦æ±‚é«˜ï¼š
- éœ€è¦æŠ€æœ¯çŸ¥è¯†
- éœ€è¦æŒç»­ç›‘æ§
- éœ€è¦åŠæ—¶è°ƒæ•´

æ•£æˆ·æœ›è€Œå´æ­¥ï¼
```

#### å¼Šç«¯3ï¼šGasè´¹å¢åŠ 

```
V3 swap:
Gas: ~120,000 (æ¯”V2è´µ40%)

V3 æ·»åŠ æµåŠ¨æ€§:
Gas: ~200,000 (æ¯”V2è´µ80%)

åŸå› ï¼š
- é€»è¾‘æ›´å¤æ‚
- éœ€è¦mint NFT
- tick bitmapæ“ä½œ

å¯¹å°é¢äº¤æ˜“ä¸å‹å¥½ï¼
```

#### å¼Šç«¯4ï¼šæµåŠ¨æ€§ç¢ç‰‡åŒ–

```
åŒä¸€ä¸ªETH/USDCå¯èƒ½æœ‰å¤šä¸ªæ± å­ï¼š

â”œâ”€â”€ 0.05%è´¹ç‡æ± 
â”œâ”€â”€ 0.3%è´¹ç‡æ±   
â””â”€â”€ 1%è´¹ç‡æ± 

æ¯ä¸ªæ± å­çš„LPåˆåˆ†æ•£åœ¨ä¸åŒä»·æ ¼åŒºé—´

ç»“æœï¼š
æµåŠ¨æ€§åˆ†æ•£
â†’ å•ä¸ªæ± å­æ·±åº¦é™ä½
â†’ æ»‘ç‚¹å¯èƒ½æ›´å¤§

ä¸å¦‚V2çš„ç»Ÿä¸€æµåŠ¨æ€§ï¼
```

### 3.4 V3çš„å¸‚åœºè¡¨ç°

```
ä¸Šçº¿åï¼š
- èµ„é‡‘æ•ˆç‡ç¡®å®æå‡
- ä½†TVLå¢é•¿æ…¢äºV2

åŸå› ï¼š
- æ•£æˆ·è§‰å¾—å¤ªå¤æ‚
- è¢«åŠ¨LPæ›´å–œæ¬¢V2
- åªæœ‰ä¸“ä¸šLPç”¨V3

æ•°æ®ï¼ˆ2024ï¼‰ï¼š
V2 TVL: $3B
V3 TVL: $2B

V2ä»ç„¶æ˜¯ä¸»åŠ›ï¼
```

---

## 4. V4ï¼šæ¨¡å—åŒ–æœªæ¥ï¼ˆ2024ï¼‰

### 4.1 V4çš„è¯ç”Ÿ

```
å‘å¸ƒæ—¶é—´ï¼š2024å¹´ï¼ˆè®¡åˆ’ï¼‰
èƒŒæ™¯ï¼š
- V3è™½å¼ºå¤§ä½†ä¸å¤Ÿçµæ´»
- DeFiéœ€è¦æ›´å¤šå®šåˆ¶åŒ–
- Gasè´¹ä»ç„¶å¤ªé«˜

æ ¸å¿ƒç†å¿µï¼š
"Hooks - è®©ä»»ä½•äººéƒ½èƒ½å®šåˆ¶AMM"
```

### 4.2 V4çš„é©å‘½æ€§åˆ›æ–° â­â­â­â­â­

#### åˆ›æ–°1ï¼šHooksç³»ç»Ÿ

**ä»€ä¹ˆæ˜¯Hooksï¼Ÿ**

```
Hooks = é’©å­å‡½æ•° = è‡ªå®šä¹‰æ’ä»¶

V4å…è®¸åœ¨äº¤æ˜“çš„å…³é”®ç‚¹æ’å…¥è‡ªå®šä¹‰é€»è¾‘ï¼š

äº¤æ˜“æµç¨‹ï¼š
1. beforeInitialize()    â† Hook
2. åˆå§‹åŒ–æ± å­
3. afterInitialize()     â† Hook
4. beforeSwap()          â† Hook  
5. æ‰§è¡Œswap
6. afterSwap()           â† Hook
7. beforeAddLiquidity()  â† Hook
8. æ·»åŠ æµåŠ¨æ€§
9. afterAddLiquidity()   â† Hook
```

**Hooksç¤ºä¾‹ï¼š**

```solidity
// ä¾‹å­1ï¼šåŠ¨æ€æ‰‹ç»­è´¹Hook
contract DynamicFeeHook is BaseHook {
    function beforeSwap(...) external override returns (bytes4) {
        // æ ¹æ®æ³¢åŠ¨ç‡è°ƒæ•´è´¹ç‡
        uint24 fee = calculateFee();
        pool.setFee(fee);
        
        return IHooks.beforeSwap.selector;
    }
}

// ä¾‹å­2ï¼šé™ä»·å•Hook
contract LimitOrderHook is BaseHook {
    function afterSwap(...) external override returns (bytes4) {
        // æ£€æŸ¥æ˜¯å¦è§¦å‘é™ä»·å•
        checkAndExecuteLimitOrders();
        
        return IHooks.afterSwap.selector;
    }
}

// ä¾‹å­3ï¼šMEVä¿æŠ¤Hook
contract MEVProtectHook is BaseHook {
    function beforeSwap(...) external override returns (bytes4) {
        // æ£€æµ‹ä¸‰æ˜æ²»æ”»å‡»
        require(!isSandwichAttack(), "MEV detected");
        
        return IHooks.beforeSwap.selector;
    }
}
```

**æ— é™å¯èƒ½ï¼š**

```
Hookså¯ä»¥å®ç°ï¼š
âœ… åŠ¨æ€æ‰‹ç»­è´¹
âœ… é™ä»·å•
âœ… TWAMM (æ—¶é—´åŠ æƒè®¢å•)
âœ… MEVä¿æŠ¤
âœ… é“¾ä¸ŠKYC
âœ… è‡ªåŠ¨å¤åˆ©
âœ… ...ä»»ä½•ä½ èƒ½æƒ³åˆ°çš„ï¼

è¿™è®©V4æˆä¸ºä¸€ä¸ª"DEXæ“ä½œç³»ç»Ÿ"ï¼
```

#### åˆ›æ–°2ï¼šå•ä¾‹æ¨¡å¼ï¼ˆSingletonï¼‰

```
V2/V3: æ¯ä¸ªæ± å­ä¸€ä¸ªåˆçº¦
1000ä¸ªæ± å­ = 1000ä¸ªåˆçº¦

V4: æ‰€æœ‰æ± å­å…±äº«ä¸€ä¸ªåˆçº¦ï¼
1000ä¸ªæ± å­ = 1ä¸ªåˆçº¦

å¥½å¤„ï¼š
âœ… é™ä½éƒ¨ç½²æˆæœ¬
âœ… å¤šæ± äº¤æ˜“gasæ›´ä½  
âœ… æ›´å®¹æ˜“ç®¡ç†
```

#### åˆ›æ–°3ï¼šé—ªç”µè®°è´¦ï¼ˆFlash Accountingï¼‰

```
V2/V3: æ¯ç¬”swapéƒ½è½¬è´¦
Transfer gas: ~$5-10

V4: è®°è´¦ç³»ç»Ÿ
åªè®°å½•æ¬ æ¬¾ï¼Œæœ€åç»“ç®—
Transfer gas: ~$1-2

å¤šæ± è·¯ç”±æ—¶ä¼˜åŠ¿å·¨å¤§ï¼š

V2: USDCâ†’ETHâ†’WBTCâ†’DAI
è½¬è´¦4æ¬¡ï¼Œgas: $20-40

V4: USDCâ†’ETHâ†’WBTCâ†’DAI  
åªè®°è´¦ï¼Œæœ€åè½¬1æ¬¡ï¼Œgas: $5-10

çœ75% gasè´¹ï¼
```

#### åˆ›æ–°4ï¼šåŸç”ŸETHæ”¯æŒ

```
V2/V3: å¿…é¡»å…ˆwrap ETH â†’ WETH
ä¸¤æ­¥æ“ä½œï¼Œä¸¤æ¬¡gas

V4: ç›´æ¥æ”¯æŒåŸç”ŸETH
ä¸€æ­¥åˆ°ä½ï¼Œçœgas

è¿™æ˜¯å‘V1è‡´æ•¬ï¼
```

### 4.3 V4çš„æ½œåœ¨å¼Šç«¯ âš ï¸

#### å¼Šç«¯1ï¼šå¤æ‚åº¦çˆ†ç‚¸

```
V2: ~500è¡Œ
V3: ~2,000è¡Œ
V4: ~3,000è¡Œ + Hooks

å­¦ä¹ éš¾åº¦ï¼š
V2: â­â­
V3: â­â­â­â­
V4: â­â­â­â­â­

å®¡è®¡éš¾åº¦ï¼š
æ¯ä¸ªHookéƒ½éœ€è¦å®¡è®¡
æ½œåœ¨æ”»å‡»é¢æ›´å¤§
```

#### å¼Šç«¯2ï¼šHookså®‰å…¨é£é™©

```
æ¶æ„Hookå¯ä»¥ï¼š
- çªƒå–ç”¨æˆ·èµ„é‡‘
- æ“çºµä»·æ ¼
- DoSæ”»å‡»
- å‰é—¨è·‘

ç”¨æˆ·éœ€è¦ï¼š
â†’ éªŒè¯Hookä»£ç 
â†’ æ£€æŸ¥Hookæƒé™
â†’ ä¿¡ä»»Hookå¼€å‘è€…

ä¸­å¿ƒåŒ–é£é™©ä¸Šå‡ï¼
```

#### å¼Šç«¯3ï¼šæµåŠ¨æ€§æ›´åŠ ç¢ç‰‡åŒ–

```
V2: 1ä¸ªETH/USDCæ± 
V3: 4ä¸ªETH/USDCæ±  (ä¸åŒè´¹ç‡)
V4: Nä¸ªETH/USDCæ±  (ä¸åŒHooks)

æµåŠ¨æ€§åˆ†æ•£åŠ å‰§
â†’ å¯èƒ½å¯¼è‡´æ»‘ç‚¹åè€Œæ›´å¤§
```

#### å¼Šç«¯4ï¼šå°šæœªç»è¿‡æ—¶é—´è€ƒéªŒ

```
V4åˆšä¸Šçº¿ï¼ˆ2024ï¼‰
- ä»£ç æœªç»å……åˆ†éªŒè¯
- å¯èƒ½å­˜åœ¨æœªçŸ¥bug
- Hookç”Ÿæ€ä¸æˆç†Ÿ

å»ºè®®ï¼š
è°¨æ…ä½¿ç”¨ï¼Œå°é¢ä¸ºä¸»
ç­‰å¾…6-12ä¸ªæœˆè§‚å¯Ÿ
```

---

## 5. ç‰ˆæœ¬å¯¹æ¯”æ€»ç»“

### 5.1 åŠŸèƒ½å¯¹æ¯”è¡¨

| ç‰¹æ€§ | V1 | V2 | V3 | V4 |
|------|----|----|----|----|
| **ä¸Šçº¿æ—¶é—´** | 2018.11 | 2020.05 | 2021.05 | 2024 |
| **æ ¸å¿ƒå…¬å¼** | xÂ·y=k | xÂ·y=k | xÂ·y=k | xÂ·y=k |
| **äº¤æ˜“å¯¹** | ETH/Token | ERC20/ERC20 | ERC20/ERC20 | ERC20/ERC20 |
| **æ‰‹ç»­è´¹** | 0.3% | 0.3% | 0.01-1% | å¯å®šåˆ¶ |
| **LPä»£å¸** | ERC20 | ERC20 | NFT (ERC721) | NFT |
| **ä»·æ ¼åŒºé—´** | $0-$âˆ | $0-$âˆ | å¯é€‰ | å¯é€‰ |
| **é¢„è¨€æœº** | âŒ | TWAP | TWAPæ”¹è¿› | TWAPæ”¹è¿› |
| **é—ªç”µå…‘æ¢** | âŒ | âœ… | âœ… | âœ… |
| **Hooks** | âŒ | âŒ | âŒ | âœ… |
| **ä»£ç å¤æ‚åº¦** | â­ | â­â­ | â­â­â­â­ | â­â­â­â­â­ |
| **èµ„é‡‘æ•ˆç‡** | ä½ | ä½ | æé«˜ | æé«˜ |
| **Gasè´¹** | ä½ | ä½ | ä¸­ | ä½-ä¸­ |

### 5.2 è§£å†³çš„æ ¸å¿ƒé—®é¢˜

```
V1 â†’ V2:
é—®é¢˜: ETHä¸­è½¬ï¼ŒåŒå€æ‰‹ç»­è´¹
è§£å†³: ç›´æ¥ERC20äº¤æ˜“ âœ…

V2 â†’ V3:
é—®é¢˜: èµ„é‡‘æ•ˆç‡ä½  
è§£å†³: é›†ä¸­æµåŠ¨æ€§ âœ…

V3 â†’ V4:
é—®é¢˜: ä¸å¤Ÿçµæ´»
è§£å†³: Hooksç³»ç»Ÿ âœ…

V4 â†’ V5ï¼Ÿ
é—®é¢˜: å¤æ‚åº¦å¤ªé«˜ï¼Ÿ
è§£å†³: ç®€åŒ–ï¼Ÿæˆ–AIè¾…åŠ©ï¼Ÿ
```

### 5.3 å„ç‰ˆæœ¬é€‚ç”¨åœºæ™¯

| ç‰ˆæœ¬ | é€‚åˆçš„äººç¾¤ | é€‚åˆçš„åœºæ™¯ |
|------|-----------|-----------|
| **V2** | æ™®é€šç”¨æˆ·ã€è¢«åŠ¨LP | æ—¥å¸¸äº¤æ˜“ã€é•¿æœŸLPã€ç®€å•åœºæ™¯ |
| **V3** | ä¸“ä¸šLPã€èšåˆå™¨ | å¤§é¢äº¤æ˜“ã€ä¸»åŠ¨ç®¡ç†ã€é«˜é¢‘è°ƒæ•´ |
| **V4** | å¼€å‘è€…ã€é«˜çº§ç”¨æˆ· | å®šåˆ¶åŒ–éœ€æ±‚ã€åˆ›æ–°å®éªŒ |

### 5.4 TVLä¸å¸‚å ç‡

```
å½“å‰æ•°æ®ï¼ˆ2024ï¼‰ï¼š

V2 TVL: $3.0B
V3 TVL: $2.0B  
V4 TVL: $0.5B (åˆšä¸Šçº¿)

æ€»TVL: $5.5B

å¸‚å ç‡ï¼š
V2: 55%  â† ä»æ˜¯ä¸»åŠ›ï¼
V3: 36%
V4: 9%

ç»“è®ºï¼š
ç®€å•çš„V2ä»ç„¶æœ€å—æ¬¢è¿
V3é€‚åˆä¸“ä¸šç©å®¶
V4åˆšèµ·æ­¥
```

---

## 6. æŠ€æœ¯æ¼”è¿›æ—¶é—´çº¿

### 6.1 å®Œæ•´æ—¶é—´çº¿

```mermaid
gantt
    title UniswapæŠ€æœ¯æ¼”è¿›æ—¶é—´çº¿
    dateFormat YYYY-MM
    
    section V1æ—¶ä»£
    V1ç ”å‘ä¸ä¸Šçº¿ :2018-01, 2018-11
    V1è¿è¥ :2018-11, 2020-05
    
    section V2æ—¶ä»£  
    V2ç ”å‘ :2019-09, 2020-05
    V2ä¸»å¯¼æœŸ :2020-05, 2021-05
    V2æŒç»­è¿è¥ :2021-05, 2024-12
    
    section V3æ—¶ä»£
    V3ç ”å‘ :2020-06, 2021-05
    V3ä¸Šçº¿ä¸æˆé•¿ :2021-05, 2024-12
    
    section V4æ—¶ä»£
    V4ç ”å‘ :2022-06, 2024-06
    V4ä¸Šçº¿ :2024-06, 2024-12
```

### 6.2 å…³é”®é‡Œç¨‹ç¢‘

```
2018å¹´11æœˆ - V1ä¸Šçº¿
â””â”€â”€ é¦–ä¸ªAMM DEXï¼ŒTVL $30K

2019å¹´5æœˆ - V1 TVLçªç ´$1M
â””â”€â”€ å¸‚åœºå¼€å§‹è®¤å¯

2020å¹´5æœˆ - V2ä¸Šçº¿ â­
â””â”€â”€ DeFi Summerå¼€å§‹

2020å¹´9æœˆ - UNIä»£å¸ç©ºæŠ•
â””â”€â”€ æœ€æˆåŠŸçš„ç©ºæŠ•ï¼Œ$6Bä»·å€¼

2021å¹´5æœˆ - V3ä¸Šçº¿ â­â­â­
â””â”€â”€ é›†ä¸­æµåŠ¨æ€§é©å‘½

2021å¹´11æœˆ - TVLå³°å€¼$10B+
â””â”€â”€ Uniswapå·…å³°æ—¶åˆ»

2024å¹´6æœˆ - V4ä¸Šçº¿ â­â­
â””â”€â”€ Hooksç³»ç»Ÿï¼Œæ–°æ—¶ä»£å¼€å¯
```

### 6.3 æŠ€æœ¯æ¼”è¿›é€»è¾‘

```
V1: è¯æ˜æ¦‚å¿µ
"AMMå¯è¡Œå—ï¼Ÿ"
â†’ ç­”æ¡ˆ: å¯è¡Œï¼

V2: å®Œå–„åŠŸèƒ½
"å¦‚ä½•æ›´å¥½ç”¨ï¼Ÿ"
â†’ ç­”æ¡ˆ: ç›´æ¥äº¤æ˜“ã€é¢„è¨€æœºã€é—ªå…‘

V3: æå‡æ•ˆç‡
"å¦‚ä½•æ›´é«˜æ•ˆï¼Ÿ"
â†’ ç­”æ¡ˆ: é›†ä¸­æµåŠ¨æ€§ã€å¤šæ¡£è´¹ç‡

V4: å¼€æ”¾ç”Ÿæ€
"å¦‚ä½•æ›´çµæ´»ï¼Ÿ"
â†’ ç­”æ¡ˆ: Hooksç³»ç»Ÿ

è¶‹åŠ¿ï¼š
ä»ç®€å• â†’ å¤æ‚
ä»æ ‡å‡†åŒ– â†’ å®šåˆ¶åŒ–
ä»è¢«åŠ¨ â†’ ä¸»åŠ¨
```

---

## ğŸ“Š æ•°æ®å¯¹æ¯”ï¼ˆ2024ï¼‰

### 6.1 TVLå¯¹æ¯”

```
åè®®         TVL        å¸‚å ç‡
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Uniswap V2   $3.0B     20%
Uniswap V3   $2.0B     13%
Curve        $4.0B     27%  
PancakeSwap  $2.5B     17%
å…¶ä»–         $3.5B     23%

DEXæ€»TVL: $15B
```

### 6.2 æ—¥äº¤æ˜“é‡å¯¹æ¯”

```
V2: $500M-$1B
V3: $1B-$2B  â† V3äº¤æ˜“é‡åè¶…V2ï¼
V4: $50M-$100M

ä¸ºä»€ä¹ˆV3äº¤æ˜“é‡é«˜ä½†TVLä½ï¼Ÿ
â†’ èµ„é‡‘æ•ˆç‡é«˜ï¼
â†’ èšåˆå™¨ä¼˜å…ˆè·¯ç”±åˆ°V3
```

---

## ğŸ¯ å­¦ä¹ å»ºè®®

### ä¼˜å…ˆçº§æ’åº

```
å¿…å­¦ï¼ˆP0ï¼‰ï¼š
âœ… V2 - å·¥ä¸šæ ‡å‡†ï¼Œå¿…é¡»æ·±å…¥ç†è§£
   â†’ å­¦ä¹ æ—¶é—´: 30å°æ—¶
   â†’ é‡è¦ç¨‹åº¦: â­â­â­â­â­

é‡è¦ï¼ˆP1ï¼‰ï¼š
âœ… V3 - æœªæ¥è¶‹åŠ¿ï¼Œéœ€è¦æŒæ¡
   â†’ å­¦ä¹ æ—¶é—´: 15å°æ—¶
   â†’ é‡è¦ç¨‹åº¦: â­â­â­â­

äº†è§£ï¼ˆP2ï¼‰ï¼š
âœ… V1 - å†å²æ„ä¹‰ï¼Œå¿«é€Ÿè¿‡
   â†’ å­¦ä¹ æ—¶é—´: 5å°æ—¶
   â†’ é‡è¦ç¨‹åº¦: â­â­

è§‚æœ›ï¼ˆP3ï¼‰ï¼š
âœ… V4 - åˆšä¸Šçº¿ï¼Œå…ˆè§‚å¯Ÿ
   â†’ å­¦ä¹ æ—¶é—´: 5å°æ—¶
   â†’ é‡è¦ç¨‹åº¦: â­â­â­
```

### å­¦ä¹ è·¯çº¿

```
Week 1: V1å¿«é€Ÿäº†è§£
â”œâ”€â”€ V1çš„åˆ›æ–°
â”œâ”€â”€ xÂ·y=kåŸç†
â””â”€â”€ ä¸ºä»€ä¹ˆéœ€è¦V2

Week 2-3: V2æ·±åº¦å­¦ä¹  â­â­â­
â”œâ”€â”€ ç™½çš®ä¹¦ç²¾è¯»
â”œâ”€â”€ æºç é€è¡Œè§£æ
â”œâ”€â”€ Forkå¹¶æ”¹è¿›
â””â”€â”€ è¿™æ˜¯é‡ç‚¹ï¼

Week 4: V3æ ¸å¿ƒç†è§£
â”œâ”€â”€ é›†ä¸­æµåŠ¨æ€§åŸç†
â”œâ”€â”€ tickå’Œpositionæœºåˆ¶
â””â”€â”€ ä½•æ—¶ç”¨V3

Week 5: V4äº†è§£
â”œâ”€â”€ Hooksæ¦‚å¿µ
â”œâ”€â”€ ç¤ºä¾‹Hook
â””â”€â”€ æœªæ¥å±•æœ›
```

---

## ğŸ“š å­¦ä¹ èµ„æº

### å®˜æ–¹èµ„æº
- [Uniswap V1 Docs](https://docs.uniswap.org/contracts/v1/overview)
- [Uniswap V2 Whitepaper](https://uniswap.org/whitepaper.pdf) â­â­â­â­â­
- [Uniswap V3 Whitepaper](https://uniswap.org/whitepaper-v3.pdf)
- [Uniswap V4 Whitepaper](https://uniswap.org/whitepaper-v4.pdf)

### æºç 
- [V1 Core](https://github.com/Uniswap/v1-contracts)
- [V2 Core](https://github.com/Uniswap/v2-core) â­â­â­â­â­
- [V3 Core](https://github.com/Uniswap/v3-core)
- [V4 Core](https://github.com/Uniswap/v4-core)

### è§†é¢‘æ•™ç¨‹
- [Smart Contract Programmer - Uniswap V2](https://www.youtube.com/watch?v=Eh3faq2OcoI)
- [Uniswap V3 Explained](https://www.youtube.com/watch?v=ClWR1570UQw)

---

## âœ… å­¦ä¹ æ£€æŸ¥æ¸…å•

å®Œæˆæœ¬ç« åï¼Œä½ åº”è¯¥èƒ½å¤Ÿï¼š

- [ ] è¯´å‡ºV1çš„è¯ç”ŸèƒŒæ™¯å’Œåˆ›æ–°ç‚¹
- [ ] è§£é‡ŠV1ä¸ºä»€ä¹ˆéœ€è¦æ¼”è¿›åˆ°V2
- [ ] åˆ—ä¸¾V2çš„5å¤§æ”¹è¿›
- [ ] è§£é‡ŠV3é›†ä¸­æµåŠ¨æ€§çš„åŸç†
- [ ] ç†è§£V3ä¸ºä»€ä¹ˆå¤æ‚
- [ ] çŸ¥é“V4çš„Hooksæ˜¯ä»€ä¹ˆ
- [ ] å¯¹æ¯”4ä¸ªç‰ˆæœ¬çš„ä¼˜ç¼ºç‚¹
- [ ] çŸ¥é“å­¦ä¹ å“ªä¸ªç‰ˆæœ¬æœ€é‡è¦

---

## ğŸ¯ ä¸‹ä¸€æ­¥

ç†è§£äº†Uniswapæ¼”è¿›å²åï¼Œæ·±å…¥å­¦ä¹ ï¼š

1. âœ… **V1è¯¦ç»†å­¦ä¹ ** â†’ `01-Uniswap-V1/`
2. âœ… **V2å®Œå…¨è§£æ** â†’ `02-Uniswap-V2-æ ¸å¿ƒé‡ç‚¹/` â­â­â­â­â­
3. âœ… **V3æ¶æ„** â†’ `03-Uniswap-V3/`
4. âœ… **V4 Hooks** â†’ `04-Uniswap-V4-æœ€å‰æ²¿/`

---

## ğŸ’¡ æ ¸å¿ƒè¦ç‚¹

### è®°ä½è¿™äº›

```
1. V1å¼€åˆ›äº†AMM
   xÂ·y=kæ”¹å˜äº†ä¸–ç•Œ

2. V2æ˜¯å·¥ä¸šæ ‡å‡†
   å¿…é¡»æ·±å…¥å­¦ä¹ 

3. V3æå‡æ•ˆç‡
   é›†ä¸­æµåŠ¨æ€§æ˜¯æœªæ¥

4. V4å¼€æ”¾ç”Ÿæ€
   Hooks = æ— é™å¯èƒ½

5. æŠ€æœ¯ä¸æ–­æ¼”è¿›
   ä½†xÂ·y=kä»æ˜¯æ ¸å¿ƒ
```

### Uniswapçš„å½±å“

```
ç›´æ¥å½±å“ï¼š
- 100+ åè®® fork
- SushiSwap, PancakeSwapç­‰
- AMMæˆä¸ºDEXä¸»æµ

é—´æ¥å½±å“ï¼š
- å¯å‘Curveä¼˜åŒ–ç¨³å®šå¸
- æ¨åŠ¨DeFi Summer
- æ”¹å˜äº†é‡‘èè¡Œä¸š

å†å²åœ°ä½ï¼š
Uniswap = DeFiçš„iPhone
```

---

**æ­å–œä½ äº†è§£äº†Uniswapå®Œæ•´æ¼”è¿›å²ï¼** ğŸ‰

ä½ ç°åœ¨ç†è§£äº†æ¯ä¸ªç‰ˆæœ¬ä¸ºä»€ä¹ˆå­˜åœ¨ã€è§£å†³äº†ä»€ä¹ˆé—®é¢˜ã€è¿˜æœ‰ä»€ä¹ˆå±€é™ã€‚

å‡†å¤‡å¥½æ·±å…¥å­¦ä¹ V2æºç äº†å—ï¼Ÿé‚£æ˜¯æœ€é‡è¦çš„ä¸€æ­¥ï¼ğŸš€ğŸ’ª
