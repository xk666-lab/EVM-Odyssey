# 代码审计工具

### 一、 静态分析工具 (Static Analysis) 1.静态分析工具



这类工具不运行代码，而是直接扫描源代码或字节码，根据预设的漏洞模式（如重入、整数溢出等）进行检查。它们是审计工作流的**第一道防线**。

- 

  ### **Slither (强烈推荐)**

  

  - **介绍**：由顶级安全公司 **Trail of Bits** 开发，是目前**最强大、最流行**的静态分析工具。它支持多种漏洞检测器，并且有很好的扩展性。
  - **优点**：
    - **检测范围广**：内置了超过70种漏洞和代码问题的检测器。
    - **输出清晰**：能以多种格式（控制台、JSON、Markdown）输出报告，清晰地指出问题代码的位置和风险等级。
    - **可定制性强**：可以编写自己的检测脚本或禁用某些检测。
    - **集成方便**：可以轻松集成到 CI/CD 流程中。
  - **如何使用**：`slither .` 一条命令即可对整个项目进行分析。

- 

  ### **Mythril 秘银**

  

  - **介绍**：一个强大的安全分析工具，它使用**符号执行 (Symbolic Execution)** 的方法来探索代码的执行路径，从而发现更深层次的漏洞。
  - **优点**：
    - 能发现一些 Slither 可能遗漏的、与状态相关的复杂漏洞。
    - 可以分析已部署在链上的合约字节码。
  - **缺点**：分析速度较慢，且可能会产生一些误报。

- 

  ### **Solhint 索尔欣特**

  

  - **介绍**：一个专注于代码风格和安全最佳实践的**Linter（代码规范检查器）**。它更侧重于预防问题，而不是发现严重漏洞。
  - **优点**：
    - 速度极快，可以实时集成在 VS Code 等编辑器中。
    - 帮助团队统一代码风格，遵循社区的最佳实践（如函数可见性、变量命名等）。
    - 规则集可配置。
  - **如何使用**：`solhint 'contracts/**/*.sol'`

------



### 二、 动态分析与测试框架 (Dynamic Analysis & Testing)



这类工具通过在测试环境中实际运行合约代码，模拟交易和交互，来发现运行时才可能暴露的问题。

- 

  ### **Foundry (强烈推荐)**

  

  - **介绍**：目前**最受专业审计员和开发者欢迎**的智能合约开发与测试框架。它使用 Solidity 语言来编写测试用例，速度极快。
  - **核心组件**：
    - **Forge**：测试运行器。其**模糊测试 (Fuzzing)** 功能极其强大，可以自动生成大量随机输入来测试函数，寻找边界情况和意外崩溃。
    - **Cast**：命令行工具，用于与链上合约进行交互。
  - **为什么审计员喜欢它**：可以直接用 Solidity 编写复杂的攻击场景和测试用例，比用 JavaScript (Hardhat) 更直观、更强大。

- 

  ### **Hardhat 安全帽**

  

  - **介绍**：一个基于 JavaScript/TypeScript 的开发环境，曾经是行业标准，现在依然非常流行。
  - **优点**：
    - 拥有庞大的插件生态系统（如 `hardhat-gas-reporter`, `solidity-coverage`）。
    - JavaScript 社区庞大，上手相对容易。
  - **与 Foundry 的对比**：在纯粹的测试性能和复杂测试用例的编写上，Foundry 目前更胜一筹。

------



### 三、 形式化验证工具 (Formal Verification)

这是最硬核的一类工具，它试图用**数学方法严格证明**合约代码在所有可能的输入下都符合预设的规范（例如，“合约的总锁仓量永远不会减少”）。

- ### **Certora Prover**

  - **介绍**：形式化验证领域的领导者。用户需要使用一种专门的规范语言 (CVL - Certora Verification Language) 来描述合约应该遵守的“不变量”和规则。
  - **优点**：
    - **能提供最高级别的安全保证**。一旦一个属性被证明，就意味着在数学上不可能违反它。
    - 能发现最隐蔽、最违反直觉的逻辑漏洞。
  - **缺点**：学习曲线极其陡峭，需要深厚的计算机科学和逻辑学背景。通常只有大型头部协议会进行形式化验证。

------



### 四、 可视化与辅助工具



- ### **Solidity Visual Developer (VS Code 插件) Solidity Visual Developer（VS Code 插件）**

  - **介绍**：一个 VS Code 插件，可以将合约的继承关系、函数调用图等**可视化**，帮助审计员快速理解一个复杂项目的代码结构。

- 

  ### **Etherscan / Phalcon (区块浏览器) Etherscan / Phalcon ( 区块浏览器)**

  - **介绍**：虽然是区块浏览器，但它们是分析**已发生攻击**的终极工具。通过 Etherscan 的交易详情和 Phalcon 的交易模拟器，可以一步步回溯攻击者的每一步操作，是学习真实世界攻击手法的最佳课堂。

### 审计工作流建议

一个专业审计员的典型工作流通常是这样的：

1. **初步扫描**：先用 **Slither** 和 **Solhint** 对整个代码库进行快速扫描，找出所有低级和中级的已知问题。
2. **手动代码审查**：**这是最核心、最不可替代的一步**。审计员会逐行阅读代码，重点理解业务逻辑，寻找设计缺陷。
3. **编写测试用例**：使用 **Foundry** 针对自己怀疑有问题的复杂逻辑，编写专门的测试用例和模糊测试，尝试“打破”合约。
4. **深入分析**：对于特别关键但又难以测试的模块，可能会使用 **Mythril** 或进行小范围的**形式化验证**。
5. **撰写报告**：将所有发现汇总成详细的审计报告。