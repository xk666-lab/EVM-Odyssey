# ç­¾åé‡æ”¾æ”»å‡» (Signature Replay Attack)

> ğŸ’¡ **æ ¸å¿ƒè¦ç‚¹**
> - é“¾ä¸‹ç­¾åå¯è¢«é‡å¤ä½¿ç”¨
> - å¿…é¡»ä½¿ç”¨ Nonce é˜²æ­¢é‡æ”¾
> - EIP-712 æ˜¯é»„é‡‘æ ‡å‡†
> - åŒ…å« chainId å’Œåˆçº¦åœ°å€é˜²æ­¢è·¨é“¾/è·¨åˆçº¦é‡æ”¾

---

## ğŸ“š ç›®å½•

1. [ä¸ºä»€ä¹ˆéœ€è¦é“¾ä¸‹ç­¾å](#1-ä¸ºä»€ä¹ˆéœ€è¦é“¾ä¸‹ç­¾å)
2. [ä»€ä¹ˆæ˜¯ç­¾åé‡æ”¾æ”»å‡»](#2-ä»€ä¹ˆæ˜¯ç­¾åé‡æ”¾æ”»å‡»)
3. [é˜²èŒƒæ–¹æ³•](#3-é˜²èŒƒæ–¹æ³•)
4. [EIP-712 æ ‡å‡†](#4-eip-712-æ ‡å‡†)
5. [å®æˆ˜ä»£ç ](#5-å®æˆ˜ä»£ç )

---

## 1. ä¸ºä»€ä¹ˆéœ€è¦é“¾ä¸‹ç­¾åï¼Ÿ

åœ¨ç†è§£æ”»å‡»ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè¦æ˜ç™½ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ç§æ¨¡å¼ã€‚ä¸»è¦åŸå› æ˜¯ä¸ºäº†æå‡ç”¨æˆ·ä½“éªŒå’Œå®ç°ç‰¹å®šåŠŸèƒ½ï¼š

### 1.1 åº”ç”¨åœºæ™¯

#### Gasless äº¤æ˜“

æ–°ç”¨æˆ·é’±åŒ…é‡Œæ²¡æœ‰ ETH æ¥æ”¯ä»˜ Gas è´¹ã€‚é€šè¿‡é“¾ä¸‹ç­¾åï¼Œä»–ä»¬å¯ä»¥æˆæƒä¸€ç¬”æ“ä½œï¼Œç”±é¡¹ç›®æ–¹çš„ä¸­ç»§è€… (Relayer) æ¥æ”¯ä»˜ Gas å°†äº¤æ˜“æäº¤ä¸Šé“¾ã€‚

#### çŠ¶æ€é€šé“/Layer 2

åœ¨æ”¯ä»˜é€šé“æˆ–æŸäº› L2 è§£å†³æ–¹æ¡ˆä¸­ï¼Œå¤§é‡äº¤æ˜“é€šè¿‡é“¾ä¸‹ç­¾ååœ¨å‚ä¸æ–¹ä¹‹é—´äº¤æ¢ï¼Œåªåœ¨æœ€ç»ˆç»“ç®—æ—¶æ‰ä¸Šé“¾ï¼Œä»¥æé«˜æ•ˆç‡ã€‚

#### å»ä¸­å¿ƒåŒ–åº”ç”¨æˆæƒ

ä¾‹å¦‚ï¼Œåœ¨ OpenSea ç­‰ NFT å¸‚åœºä¸Šæ¶ä¸€ä¸ª NFTï¼Œä½ åªéœ€è¦ç­¾åä¸€æ¡æ¶ˆæ¯æˆæƒæŒ‚å•å³å¯ï¼Œæ— éœ€æ”¯ä»˜ Gasã€‚å½“æœ‰äººè´­ä¹°æ—¶ï¼Œå¸‚åœºä¼šå°†ä½ çš„æˆæƒç­¾åå’Œä¹°å®¶çš„äº¤æ˜“ä¸€èµ·æ‰“åŒ…ä¸Šé“¾ã€‚

### 1.2 å·¥ä½œæµç¨‹

1. **ç”¨æˆ· (Signer)**ï¼šåœ¨å‰ç«¯ä½¿ç”¨è‡ªå·±çš„ç§é’¥å¯¹ä¸€æ¡åŒ…å«æ“ä½œæ„å›¾çš„æ¶ˆæ¯è¿›è¡Œç­¾å
2. **ä¸­ç»§è€… (Relayer)**ï¼šè·å–è¿™æ¡æ¶ˆæ¯å’Œç”¨æˆ·çš„ç­¾å
3. **æ™ºèƒ½åˆçº¦ (Contract)**ï¼šä¸­ç»§è€…è°ƒç”¨æ™ºèƒ½åˆçº¦çš„æŸä¸ªå‡½æ•°ï¼Œå¹¶å°†æ¶ˆæ¯å’Œç­¾åä½œä¸ºå‚æ•°ä¼ å…¥ã€‚åˆçº¦å†…ç½®çš„é€»è¾‘ä¼šä½¿ç”¨ `ecrecover` è¿™ä¸ªå¯†ç å­¦å‡½æ•°æ¥éªŒè¯ç­¾åæ˜¯å¦ç¡®å®æ¥è‡ªè¯¥ç”¨æˆ·ï¼ŒéªŒè¯é€šè¿‡åï¼Œå†æ‰§è¡Œæ¶ˆæ¯ä¸­çš„æ“ä½œ

---

## 2. ä»€ä¹ˆæ˜¯ç­¾åé‡æ”¾æ”»å‡»ï¼Ÿ

### 2.1 æ ¸å¿ƒæ¦‚å¿µ

ç­¾åé‡æ”¾æ”»å‡»çš„æ ¸å¿ƒåœ¨äºï¼š**æ”»å‡»è€…æˆªè·äº†ä¸€ä¸ªç”¨æˆ·åˆæ³•ã€æœ‰æ•ˆçš„ç­¾åæ¶ˆæ¯ï¼Œå¹¶åœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡æˆ–æ—¶é—´ç‚¹ï¼Œå°†å…¶"é‡æ’­"ç»™æ™ºèƒ½åˆçº¦ï¼Œå¯¼è‡´åˆçº¦åœ¨ç”¨æˆ·ä¸çŸ¥æƒ…æˆ–éæœ¬æ„çš„æƒ…å†µä¸‹ï¼Œé‡å¤æ‰§è¡Œäº†è¯¥ç­¾åæ‰€æˆæƒçš„æ“ä½œã€‚**

ç”±äºç­¾åæœ¬èº«æ˜¯æœ‰æ•ˆçš„ï¼ˆç¡®å®æ˜¯è¯¥ç”¨æˆ·ç­¾çš„ï¼‰ï¼Œå¦‚æœåˆçº¦çš„éªŒè¯é€»è¾‘ä¸å¤Ÿä¸¥è°¨ï¼Œå®ƒå°±ä¼šæŠŠè¿™æ¬¡é‡æ’­çš„æ”»å‡»å½“ä½œä¸€æ¬¡æ–°çš„ã€åˆæ³•çš„è¯·æ±‚æ¥å¤„ç†ã€‚

### 2.2 æ”»å‡»å®ä¾‹

å‡è®¾æœ‰ä¸€ä¸ªå»ä¸­å¿ƒåŒ–çš„äº¤æ˜“æ‰€ï¼ˆDEXï¼‰ï¼Œå®ƒå…è®¸ç”¨æˆ·é€šè¿‡ç­¾åæ¥æˆæƒ"ä»æˆ‘çš„è´¦æˆ·ä¸­è½¬å‡º100ä¸ªUSDCç»™Bob"ã€‚

1. **æ­£å¸¸äº¤æ˜“**ï¼šAlice æƒ³è¦ç»™ Bob è½¬ 100 USDCã€‚å¥¹ç­¾ç½²äº†ä¸€æ¡æ¶ˆæ¯ `{from: Alice, to: Bob, amount: 100}`ï¼Œå¾—åˆ°ä¸€ä¸ªç­¾å `sig_A`ã€‚ä¸­ç»§è€…å°†è¿™æ¡æ¶ˆæ¯å’Œç­¾åæäº¤ç»™DEXåˆçº¦ï¼Œåˆçº¦éªŒè¯é€šè¿‡ï¼ŒæˆåŠŸå°† 100 USDC ä» Alice è½¬ç»™ Bob
2. **æ”»å‡»å‘ç”Ÿ**ï¼šä¸€ä¸ªæ¶æ„çš„è§‚å¯Ÿè€… Eve çœ‹åˆ°äº†è¿™ç¬”é“¾ä¸Šäº¤æ˜“ï¼Œå¥¹å¤åˆ¶äº†æ¶ˆæ¯ `{from: Alice, to: Bob, amount: 100}` å’Œç­¾å `sig_A`
3. **é‡æ”¾**ï¼šEve å†æ¬¡è°ƒç”¨ DEX åˆçº¦çš„åŒä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¼ å…¥**ä¸€æ¨¡ä¸€æ ·**çš„æ¶ˆæ¯å’Œç­¾å
4. **åˆçº¦æ¼æ´**ï¼šå¦‚æœ DEX åˆçº¦çš„éªŒè¯é€»è¾‘ä»…ä»…æ˜¯æ£€æŸ¥"è¿™ä¸ªç­¾åæ˜¯å¦æ¥è‡ª Alice"ï¼Œé‚£ä¹ˆéªŒè¯ä¾ç„¶ä¼šé€šè¿‡ï¼å› ä¸º `sig_A` ç¡®å®æ˜¯ Alice çš„æœ‰æ•ˆç­¾å
5. **åæœ**ï¼šåˆçº¦ä¼š**ç¬¬äºŒæ¬¡**æ‰§è¡Œè½¬è´¦æ“ä½œï¼Œåˆä» Alice çš„è´¦æˆ·é‡Œè½¬äº† 100 USDC ç»™ Bobã€‚Alice å‡­ç©ºæŸå¤±äº† 100 USDC

---

## 3. é˜²èŒƒæ–¹æ³•

é˜²èŒƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š**è®©æ¯ä¸€ä¸ªç­¾åéƒ½æˆä¸ºä¸€æ¬¡æ€§çš„ã€ä¸”ä¸ç‰¹å®šä¸Šä¸‹æ–‡ç»‘å®šçš„"å”¯ä¸€å‡­è¯"ã€‚**

ä¸€ä¸ªç­¾ååªèƒ½åœ¨ä¸€ä¸ªæ­£ç¡®çš„åˆçº¦ã€æ­£ç¡®çš„ç½‘ç»œä¸Šï¼Œå› ä¸ºä¸€ä¸ªæ­£ç¡®çš„ç†ç”±ï¼Œè¢«ä½¿ç”¨ä¸€æ¬¡ï¼Œä¸”ä»…èƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚

### 3.1 ä½¿ç”¨ Nonce (Number Used Once)

è¿™æ˜¯æœ€åŸºç¡€ä¹Ÿæ˜¯æœ€æ ¸å¿ƒçš„é˜²å¾¡æ‰‹æ®µï¼Œç”¨äºé˜²æ­¢åœ¨**åŒä¸€ä¸ªåˆçº¦å†…**çš„é‡æ”¾ã€‚

#### åŸç†

- åˆçº¦ä¸ºæ¯ä¸€ä¸ªç”¨æˆ·ï¼ˆåœ°å€ï¼‰ç»´æŠ¤ä¸€ä¸ªè®¡æ•°å™¨ï¼Œç§°ä¸º `nonce`
- è¿™ä¸ª `nonce` ä»0å¼€å§‹

#### å®ç°

1. ç”¨æˆ·è¦ç­¾åæ—¶ï¼Œå¿…é¡»ä»åˆçº¦ä¸­è¯»å–è‡ªå·±å½“å‰çš„ `nonce` å€¼ï¼Œå¹¶å°†å…¶åŒ…å«åœ¨å¾…ç­¾åçš„æ¶ˆæ¯ä¸­ã€‚ä¾‹å¦‚ï¼Œæ¶ˆæ¯å˜æˆ `{from: Alice, to: Bob, amount: 100, nonce: 0}`
2. åˆçº¦åœ¨éªŒè¯ç­¾ååï¼Œé™¤äº†æ£€æŸ¥ç­¾åè€…èº«ä»½ï¼Œè¿˜å¿…é¡»æ£€æŸ¥æ¶ˆæ¯ä¸­çš„ `nonce` æ˜¯å¦ä¸åˆçº¦ä¸­è®°å½•çš„è¯¥ç”¨æˆ· `nonce` ç›¸ç­‰
3. å¦‚æœ `nonce` åŒ¹é…ï¼Œåˆçº¦æ‰§è¡Œæ“ä½œï¼Œå¹¶**ç«‹å³å°†è¯¥ç”¨æˆ·çš„ `nonce` åŠ ä¸€** (`nonce++`)

#### æ•ˆæœ

å½“æ”»å‡»è€… Eve å°è¯•é‡æ”¾åˆšæ‰é‚£æ¡åŒ…å« `nonce: 0` çš„æ¶ˆæ¯æ—¶ï¼Œåˆçº¦ä¼šå‘ç° Alice å½“å‰çš„ `nonce` å·²ç»æ˜¯ `1` äº†ï¼Œ`nonce` ä¸åŒ¹é…ï¼Œäº¤æ˜“å¤±è´¥ã€‚è¿™å°±ä¿è¯äº†æ¯ä¸ªç­¾ååªèƒ½è¢«æˆåŠŸä½¿ç”¨ä¸€æ¬¡ã€‚

### 3.2 å¼•å…¥é“¾ID (`chainId`)

è¿™ç”¨äºé˜²èŒƒ**è·¨é“¾é‡æ”¾æ”»å‡» (Cross-chain Replay)**ã€‚

#### é£é™©åœºæ™¯

å¦‚æœä¸€ä¸ªé¡¹ç›®åŒæ—¶éƒ¨ç½²åœ¨ä»¥å¤ªåŠä¸»ç½‘ (Chain ID: 1) å’Œ Polygon (Chain ID: 137) ä¸Šï¼Œå¹¶ä¸”åˆçº¦ä»£ç å’Œç­¾åé€»è¾‘å®Œå…¨ç›¸åŒã€‚é‚£ä¹ˆï¼Œä¸€ä¸ªåœ¨ Polygon ä¸Šæˆæƒçš„ç­¾åï¼Œå¯èƒ½ä¼šè¢«æ”»å‡»è€…æ‹¿åˆ°ä»¥å¤ªåŠä¸»ç½‘ä¸Šé‡æ”¾ï¼Œåä¹‹äº¦ç„¶ã€‚

#### å®ç°

- åœ¨å¾…ç­¾åçš„æ¶ˆæ¯ä¸­ï¼ŒåŒ…å«å½“å‰åŒºå—é“¾çš„ `chain ID`
- åˆçº¦åœ¨éªŒè¯æ—¶ï¼Œä¼šæ£€æŸ¥æ¶ˆæ¯ä¸­çš„ `chain ID` æ˜¯å¦ä¸å½“å‰é“¾çš„ `chain ID` ç›¸ç¬¦

#### æ•ˆæœ

Polygon ä¸Šçš„ç­¾ååœ¨ä»¥å¤ªåŠä¸»ç½‘ä¸Šä¼šå› ä¸º `chain ID` ä¸åŒ¹é…è€Œå¤±æ•ˆï¼Œä»è€Œé˜»æ­¢äº†è·¨é“¾é‡æ”¾ã€‚

### 3.3 ç»‘å®šåˆçº¦åœ°å€

è¿™ç”¨äºé˜²èŒƒç­¾ååœ¨**ä¸åŒåˆçº¦ä¹‹é—´**çš„é‡æ”¾ã€‚

#### é£é™©åœºæ™¯

é¡¹ç›®æ–¹å¯èƒ½éƒ¨ç½²äº†ä¸€ä¸ªæµ‹è¯•ç‰ˆåˆçº¦å’Œä¸€ä¸ªæ­£å¼ç‰ˆåˆçº¦ã€‚ç”¨æˆ·åœ¨æµ‹è¯•ç‰ˆåˆçº¦ä¸Šçš„ä¸€ä¸ªç­¾åï¼Œå¯èƒ½ä¼šè¢«æ”»å‡»è€…æ‹¿åˆ°æ­£å¼ç‰ˆåˆçº¦ä¸Šé‡æ”¾ï¼Œé€ æˆå®é™…èµ„äº§æŸå¤±ã€‚

#### å®ç°

- åœ¨å¾…ç­¾åçš„æ¶ˆæ¯ä¸­ï¼ŒåŒ…å«å½“å‰åˆçº¦çš„åœ°å€
- åˆçº¦éªŒè¯æ—¶ï¼Œä¼šæ£€æŸ¥æ¶ˆæ¯ä¸­çš„åœ°å€æ˜¯å¦ç­‰äº `address(this)`

#### æ•ˆæœ

ç¡®ä¿ç­¾ååªèƒ½è¢«é¢„æœŸçš„ç›®æ ‡åˆçº¦æ‰€ä½¿ç”¨ã€‚

---

## 4. EIP-712 æ ‡å‡†

### 4.1 ç®€ä»‹

ä¸ºäº†ç³»ç»Ÿæ€§åœ°è§£å†³ä¸Šè¿°æ‰€æœ‰é—®é¢˜ï¼Œå¹¶æå‡ç­¾åä½“éªŒçš„å®‰å…¨æ€§ï¼ˆè®©ç”¨æˆ·åœ¨é’±åŒ…é‡Œèƒ½çœ‹æ‡‚è‡ªå·±ç­¾çš„æ˜¯ä»€ä¹ˆï¼‰ï¼Œä»¥å¤ªåŠç¤¾åŒºæå‡ºäº† **EIP-712: Typed structured data hashing and signing**ã€‚

EIP-712 æ˜¯ä¸€ç§æ ‡å‡†åŒ–çš„ç­¾åæ–¹æ¡ˆï¼Œå®ƒå¼ºåˆ¶å°†æ‰€æœ‰é˜²å¾¡æœºåˆ¶éƒ½ç»“æ„åŒ–åœ°åŒ…å«è¿›æ¥ã€‚

### 4.2 æ•°æ®ç»“æ„

ä¸€ä¸ª EIP-712 ç­¾åçš„æ•°æ®åŒ…å«ä¸¤éƒ¨åˆ†ï¼š

#### 1. Domain Separator (åŸŸåˆ†éš”ç¬¦)

è¿™æ˜¯ä¸€ä¸ªå“ˆå¸Œå€¼ï¼Œç”¨äºå°†ç­¾å"é”šå®š"åœ¨ç‰¹å®šçš„ä¸Šä¸‹æ–‡ä¸­ã€‚å®ƒç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆï¼š

- `name`: DApp çš„åç§° (e.g., "Uniswap V2")
- `version`: åº”ç”¨æˆ–ç­¾åçš„ç‰ˆæœ¬ (e.g., "1")
- `chainId`: **é“¾ID** (é˜²æ­¢è·¨é“¾é‡æ”¾)
- `verifyingContract`: **åˆçº¦åœ°å€** (é˜²æ­¢è·¨åˆçº¦é‡æ”¾)
- `salt`: ä¸€ä¸ªé¢å¤–çš„éšæœºå€¼ï¼Œç”¨äºåœ¨ç‰¹æ®Šæƒ…å†µä¸‹åŒºåˆ†åŸŸ

#### 2. Message Hash (æ¶ˆæ¯å“ˆå¸Œ)

è¿™æ˜¯å¯¹å…·ä½“æ“ä½œæ„å›¾ï¼ˆå¦‚è½¬è´¦é‡‘é¢ã€æ”¶æ¬¾äººã€**Nonce** ç­‰ï¼‰çš„å“ˆå¸Œã€‚

æœ€ç»ˆç”¨æˆ·ç­¾åçš„å†…å®¹æ˜¯ `hash(domainSeparator, messageHash)`ã€‚

### 4.3 ä¸ºä»€ä¹ˆå®‰å…¨

è¦æ“çºµ EIP-712 çš„ç­¾åæ•°æ®ï¼Œæ”»å‡»è€…å‡ ä¹éœ€è¦ï¼š
- è·å¾—å®Œå…¨ç›¸åŒçš„åŸŸåˆ†éš”ç¬¦
- ä½¿ç”¨å®Œå…¨ç›¸åŒçš„æ¶ˆæ¯å“ˆå¸Œ
- åœ¨æ­£ç¡®çš„é“¾ä¸Šã€æ­£ç¡®çš„åˆçº¦ä¸Šæ‰§è¡Œ

è¿™åœ¨ç»æµä¸Šå’ŒæŠ€æœ¯ä¸Šéƒ½æ˜¯æå…¶å›°éš¾çš„ã€‚

---

## 5. å®æˆ˜ä»£ç 

### 5.1 OpenZeppelin å®ç°

OpenZeppelin åœ¨å…¶åˆçº¦åº“ä¸­æä¾›äº† EIP-712 çš„æ ‡å‡†å®ç°ã€‚

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

import "@openzeppelin/contracts/utils/cryptography/EIP712.sol";
import "@openzeppelin/contracts/utils/cryptography/ECDSA.sol";

// ç»§æ‰¿ EIP712ï¼Œå¹¶ä¼ å…¥åŸŸåå’Œç‰ˆæœ¬
contract SecureMetaTx is EIP712 {
    using ECDSA for bytes32;
    
    // ç”¨æˆ·çš„ nonce æ˜ å°„
    mapping(address => uint256) public nonces;

    // æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ– EIP-712 çš„åŸŸåå’Œç‰ˆæœ¬
    constructor() EIP712("MyDApp", "1") {}

    struct TransferRequest {
        address from;
        address to;
        uint256 amount;
        uint256 nonce;
    }

    // EIP-712 ç±»å‹å“ˆå¸Œ
    bytes32 private constant TRANSFER_TYPEHASH = keccak256(
        "TransferRequest(address from,address to,uint256 amount,uint256 nonce)"
    );

    function executeTransfer(
        address from,
        address to,
        uint256 amount,
        bytes calldata signature
    ) external {
        uint256 nonce = nonces[from];

        // 1. æ„å»ºéœ€è¦éªŒè¯çš„æ¶ˆæ¯å“ˆå¸Œ
        bytes32 structHash = keccak256(abi.encode(
            TRANSFER_TYPEHASH,
            from,
            to,
            amount,
            nonce
        ));
        
        // 2. ä½¿ç”¨ EIP712 çš„ _hashTypedDataV4 ç”Ÿæˆæœ€ç»ˆçš„æ‘˜è¦
        bytes32 digest = _hashTypedDataV4(structHash);

        // 3. ä½¿ç”¨ ECDSA æ¢å¤ç­¾åè€…åœ°å€
        address signer = digest.recover(signature);

        // 4. éªŒè¯ç­¾åè€…èº«ä»½å’Œ nonce
        require(signer == from, "Invalid signature");
        require(signer != address(0), "Invalid signature");

        // 5. **æ ¸å¿ƒé˜²é‡æ”¾ï¼šé€’å¢ nonce**
        nonces[from]++;

        // 6. æ‰§è¡Œä¸šåŠ¡é€»è¾‘...
        // IERC20(tokenAddress).transferFrom(from, to, amount);
    }
}
```

### 5.2 å‰ç«¯ç­¾åç¤ºä¾‹

```javascript
// ä½¿ç”¨ ethers.js è¿›è¡Œ EIP-712 ç­¾å
const domain = {
  name: "MyDApp",
  version: "1",
  chainId: 1, // ä¸»ç½‘
  verifyingContract: "0x..." // åˆçº¦åœ°å€
};

const types = {
  TransferRequest: [
    { name: "from", type: "address" },
    { name: "to", type: "address" },
    { name: "amount", type: "uint256" },
    { name: "nonce", type: "uint256" }
  ]
};

const value = {
  from: "0xAlice...",
  to: "0xBob...",
  amount: 100,
  nonce: 0
};

// ç”¨æˆ·ç­¾å
const signature = await signer._signTypedData(domain, types, value);
```

---

## ğŸ“š å­¦ä¹ èµ„æº

### å®˜æ–¹æ–‡æ¡£
- [EIP-712 Standard](https://eips.ethereum.org/EIPS/eip-712)
- [OpenZeppelin EIP712](https://docs.openzeppelin.com/contracts/4.x/api/utils#EIP712)
- [OpenZeppelin ECDSA](https://docs.openzeppelin.com/contracts/4.x/api/utils#ECDSA)

### å·¥å…·
- [eth-sig-util](https://github.com/MetaMask/eth-sig-util) - MetaMask ç­¾åå·¥å…·

---

## âœ… å­¦ä¹ æ£€æŸ¥æ¸…å•

å®Œæˆæœ¬ç« èŠ‚åï¼Œç¡®è®¤ä½ å·²ç»ï¼š

- [ ] ç†è§£äº†é“¾ä¸‹ç­¾åçš„åº”ç”¨åœºæ™¯
- [ ] çŸ¥é“ä»€ä¹ˆæ˜¯ç­¾åé‡æ”¾æ”»å‡»
- [ ] æŒæ¡äº† Nonce é˜²é‡æ”¾æœºåˆ¶
- [ ] ç†è§£äº† chainId å’Œåˆçº¦åœ°å€çš„ä½œç”¨
- [ ] çŸ¥é“ EIP-712 çš„æ ¸å¿ƒæ¦‚å¿µ
- [ ] ä¼šä½¿ç”¨ OpenZeppelin çš„ EIP712 åˆçº¦
- [ ] èƒ½å¤Ÿåœ¨å‰ç«¯ä½¿ç”¨ ethers.js è¿›è¡Œç­¾å

---

## ğŸ¯ ä¸‹ä¸€æ­¥

1. âœ… å®ç°ä¸€ä¸ªå®Œæ•´çš„ Gasless äº¤æ˜“ç³»ç»Ÿ
2. âœ… å­¦ä¹  **é€‰æ‹©å™¨ç¢°æ’æ”»å‡»** â†’ `02-é€‰æ‹©å™¨ç¢°æ’æ”»å‡»/`
3. âœ… æ›´æ–°ä½ çš„ `PROGRESS.md`

---

**è®°ä½**ï¼š
- âœ… **æ°¸è¿œä½¿ç”¨ Nonce é˜²æ­¢é‡æ”¾**
- âœ… **é‡‡ç”¨ EIP-712 æ ‡å‡†**
- âœ… **åŒ…å« chainId å’Œåˆçº¦åœ°å€**
- âœ… **ä½¿ç”¨ OpenZeppelin åº“**

ç¥ä½ å­¦ä¹ é¡ºåˆ©ï¼ğŸš€

